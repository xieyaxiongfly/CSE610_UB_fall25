{% extends "base.html" %}

{% block title %}Configuration{% endblock %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Site Configuration</h1>
</div>

<div class="card">
    <div class="card-header">
        <h5 class="mb-0">Course Information</h5>
    </div>
    <div class="card-body">
        <form method="POST" action="{{ url_for('update_config') }}">
            <div class="row">
                <div class="col-md-6">
                    <label for="course_name" class="form-label">Course Name</label>
                    <input type="text" class="form-control" id="course_name" name="course_name" 
                           value="{{ config.course_name or '' }}" required>
                </div>
                <div class="col-md-6">
                    <label for="course_semester" class="form-label">Semester</label>
                    <input type="text" class="form-control" id="course_semester" name="course_semester" 
                           value="{{ config.course_semester or '' }}" placeholder="e.g., Fall 2025" required>
                </div>
            </div>
            
            <div class="mt-3">
                <label for="course_description" class="form-label">Course Description</label>
                <textarea class="form-control" id="course_description" name="course_description" 
                          rows="3" required>{{ config.course_description or '' }}</textarea>
            </div>
            
            <div class="row mt-3">
                <div class="col-md-6">
                    <label for="schoolname" class="form-label">School Name</label>
                    <input type="text" class="form-control" id="schoolname" name="schoolname" 
                           value="{{ config.schoolname or '' }}" required>
                </div>
                <div class="col-md-6">
                    <label for="schoolurl" class="form-label">School URL</label>
                    <input type="url" class="form-control" id="schoolurl" name="schoolurl" 
                           value="{{ config.schoolurl or '' }}" required>
                </div>
            </div>
            
            <div class="row mt-3">
                <div class="col-md-6">
                    <label for="url" class="form-label">Site Base URL</label>
                    <input type="url" class="form-control" id="url" name="url" 
                           value="{{ config.url or '' }}" placeholder="https://yourdomain.github.io" required>
                </div>
                <div class="col-md-6">
                    <label for="baseurl" class="form-label">Base Path</label>
                    <input type="text" class="form-control" id="baseurl" name="baseurl" 
                           value="{{ config.baseurl or '' }}" placeholder="/your-repo-name">
                    <div class="form-text">Leave empty if site is at root of domain</div>
                </div>
            </div>
            
            <div class="row mt-3">
                <div class="col-md-8">
                    <label for="logo_path" class="form-label">Logo Path</label>
                    <input type="text" class="form-control" id="logo_path" name="logo_path" 
                           value="{{ config.logo_path or '/_images/logo.png' }}" placeholder="/_images/logo.png">
                    <div class="form-text">Path to your logo image file (relative to site root)</div>
                </div>
                <div class="col-md-4">
                    <label for="logo_width" class="form-label">Logo Width (px)</label>
                    <input type="number" class="form-control" id="logo_width" name="logo_width" 
                           value="{{ config.logo_width or 75 }}" min="20" max="200">
                </div>
            </div>
            
            <div class="mt-4">
                <button type="submit" class="btn btn-primary">Save Configuration</button>
            </div>
        </form>
    </div>
</div>

<div class="card mt-4">
    <div class="card-header">
        <h5 class="mb-0">Current Configuration Preview</h5>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <h6>Course Information:</h6>
                <ul class="list-unstyled">
                    <li><strong>Name:</strong> {{ config.course_name or 'Not set' }}</li>
                    <li><strong>Semester:</strong> {{ config.course_semester or 'Not set' }}</li>
                    <li><strong>School:</strong> {{ config.schoolname or 'Not set' }}</li>
                </ul>
            </div>
            <div class="col-md-6">
                <h6>URLs:</h6>
                <ul class="list-unstyled">
                    <li><strong>Site URL:</strong> {{ config.url or 'Not set' }}</li>
                    <li><strong>Base Path:</strong> {{ config.baseurl or '/' }}</li>
                    <li><strong>School URL:</strong> {{ config.schoolurl or 'Not set' }}</li>
                </ul>
            </div>
        </div>
        
        {% if config.course_description %}
            <div class="mt-3">
                <h6>Description:</h6>
                <p class="text-muted">{{ config.course_description }}</p>
            </div>
        {% endif %}
    </div>
</div>

<div class="alert alert-warning mt-4">
    <h6 class="alert-heading">Important Notes:</h6>
    <ul class="mb-0">
        <li>Changes to configuration require rebuilding the Jekyll site to take effect</li>
        <li>Make sure to test your changes locally before deploying</li>
        <li>Base URL should match your GitHub Pages repository name if using GitHub Pages</li>
    </ul>
</div>
{% endblock %}